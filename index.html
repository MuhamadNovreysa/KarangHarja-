<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Desa KarangHarja - Sistem Informasi Desa</title>
  <meta name="description" content="Sistem Informasi Desa KarangHarja, Kecamatan Pebayuran, Kabupaten Bekasi, Jawa Barat">
  <meta name="keywords" content="desa karangharja, pebayuran, bekasi, jawa barat, sistem informasi desa">
  <link rel="stylesheet" href="styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://unpkg.com/lucide@latest/icons.css" rel="stylesheet">
  <style>
    /* Navbar Styles */
    .navbar {
      background-color: #fff !important;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 1000;
      padding: 0.25rem 1rem;
      height: 50px;
    }

    .navbar-container {
      max-width: 1280px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: flex-start;
    }

    .navbar-brand {
      display: flex;
      align-items: center;
      font-size: 1.125rem;
      font-weight: 600;
      color: #111827;
      text-decoration: none;
      margin-right: auto;
    }

    .navbar-logo {
      height: 28px;
      width: auto;
      margin-right: 0.25rem;
    }

    .navbar-toggle {
      background: none;
      border: none;
      cursor: pointer;
      padding: 0.25rem;
      display: none;
      color: #111827;
    }

    .navbar-toggle .bar {
      display: block;
      width: 18px;
      height: 2px;
      background-color: #111827;
      margin: 3px 0;
      transition: all 0.3s ease;
    }

    .navbar-toggle.active .bar:nth-child(1) {
      transform: translateY(5px) rotate(45deg);
    }

    .navbar-toggle.active .bar:nth-child(2) {
      opacity: 0;
    }

    .navbar-toggle.active .bar:nth-child(3) {
      transform: translateY(-5px) rotate(-45deg);
    }

    .navbar-menu {
      display: flex;
    }

    .navbar-links {
      list-style: none;
      display: flex;
      margin: 0;
      padding: 0;
    }

    .navbar-links li {
      margin-left: 1.5rem;
    }

    .navbar-links a {
      font-size: 0.875rem;
      font-weight: 500;
      color: #4b5563;
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .navbar-links a:hover {
      color: #2563eb;
    }

    /* Mobile Menu */
    @media (max-width: 767px) {
      .navbar-toggle {
        display: block;
        margin-left: auto;
      }

      .navbar-menu {
        display: none;
        position: absolute;
        top: 100%;
        right: 1rem;
        background-color: #fff;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        border-radius: 0.5rem;
        padding: 0.5rem 0;
        width: 180px;
        opacity: 0;
        transform: translateY(-10px);
        transition: opacity 0.3s ease, transform 0.3s ease;
      }

      .navbar-menu.active {
        display: block;
        opacity: 1;
        transform: translateY(0);
      }

      .navbar-links {
        flex-direction: column;
      }

      .navbar-links li {
        margin: 0;
        width: 100%;
      }

      .navbar-links a {
        display: block;
        padding: 0.75rem 1rem;
        text-align: left;
      }
    }

    @media (min-width: 640px) {
      .navbar-logo {
        height: 32px;
      }
    }

    @media (min-width: 1024px) {
      .navbar-logo {
        height: 36px;
      }
    }

    body {
      padding-top: 50px;
    }
  </style>
</head>
<body>
  <nav class="navbar">
    <div class="navbar-container">
      <a href="#" class="navbar-brand">
        <img src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/logoterbaru-kgQaweRbiUUGoGKhzIEJcXSvBx7mcU.png"
alt="Logo Desa KarangHarja" 
             class="navbar-logo">
        Desa KarangHarja
      </a>
      
      <!-- Mobile Menu Button -->
      <button class="navbar-toggle" id="navbar-toggle" aria-label="Toggle menu">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </button>

      <!-- Nav Links -->
      <div class="navbar-menu" id="navbar-menu">
        <ul class="navbar-links">
          <li><a href="#home">Home</a></li>
          <li><a href="#about">Struktur</a></li>
          <li><a href="#map">Maps</a></li>
          <li><a href="#activities">Kegiatan</a></li>
          <li><a href="login.html" id="login-btn">Login</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Section 1: Hero -->
  <section class="hero-section">
    <!-- Logo -->
    <div class="logo-container">
      <img src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/logoterbaru-kgQaweRbiUUGoGKhzIEJcXSvBx7mcU.png" 
           alt="Logo Desa KarangHarja" class="logo-img">
    </div>

    <!-- Text content -->
    <div class="hero-content">
      <h1 class="hero-title">
        <span id="typewriter-text">SISTEM INFORMASI DESA KARANGHARJA</span>
        <span class="cursor">|</span>
      </h1>
      <p class="hero-subtitle">Kec. Pebayuran Kab. Bekasi</p>
      <p class="hero-description">
        Selamat datang di Sistem Informasi Desa KarangHarja. Kami berkomitmen untuk memberikan pelayanan terbaik
        kepada masyarakat dan membangun desa yang maju, sejahtera, dan berkelanjutan. Mari bersama-sama
        membangun KarangHarja yang lebih baik untuk generasi mendatang.
      </p>
    </div>

    <div class="scroll-indicator">
      <i data-lucide="chevron-down" class="scroll-icon"></i>
    </div>
  </section>

  <!-- Section 2: Organizational Structure -->
  <section id="about" class="org-section">
    <div class="container mx-auto px-4">
      <div class="text-center mb-12">
        <h2 class="text-2xl font-bold text-gray-800 mb-4">STRUKTURAL PEMERINTAH DESA KARANGHARJA</h2>
        <div class="w-24 h-1 bg-blue-600 mx-auto"></div>
      </div>

      <!-- Organizational Chart -->
      <div class="org-chart-container">
        <!-- Level 0: Kepala Desa -->
        <div class="org-level">
          <div class="org-node level-0">
            <div class="org-card">
              <div class="org-icon">
                <i data-lucide="users"></i>
              </div>
              <h3>KEPALA DESA</h3>
              <p>SUKARMA</p>
            </div>
          </div>
          <div class="connection-line vertical"></div>
        </div>

        <!-- Level 1: Sekretaris Desa -->
        <div class="org-level">
          <div class="org-node level-1">
            <div class="org-card">
              <div class="org-icon">
                <i data-lucide="users"></i>
              </div>
              <h3>SEKERTARIS DESA</h3>
              <p>SUHANDI</p>
            </div>
          </div>
          <div class="connection-line vertical"></div>
        </div>

        <!-- Level 2: Kasi Pemerintah -->
        <div class="org-level">
          <div class="org-node level-2">
            <div class="org-card">
              <div class="org-icon">
                <i data-lucide="users"></i>
              </div>
              <h3>KASI PEMERINTAH</h3>
              <p>H. AHMADI</p>
            </div>
          </div>
          <div class="connection-line vertical"></div>
        </div>

        <!-- Level 3: Staff Level 1 -->
        <div class="org-staff-grid">
          <div class="org-node level-3">
            <div class="org-card">
              <div class="org-icon">
                <i data-lucide="users"></i>
              </div>
              <h3>MYATI STAF PELAYANAN</h3>
              <p>LIMAN OGAN</p>
            </div>
          </div>
          <div class="org-node level-3">
            <div class="org-card">
              <div class="org-icon">
                <i data-lucide="users"></i>
              </div>
              <h3>STAF KESEJANTRAAN</h3>
              <p>SATIM</p>
            </div>
          </div>
          <div class="org-node level-3">
            <div class="org-card">
              <div class="org-icon">
                <i data-lucide="users"></i>
              </div>
              <h3>STAF UMUM</h3>
              <p>AMSOR</p>
            </div>
          </div>
        </div>
        <div class="connection-line vertical"></div>

        <!-- Level 4: Staff Level 2 -->
        <div class="org-staff-grid">
          <div class="org-node level-3">
            <div class="org-card">
              <div class="org-icon">
                <i data-lucide="users"></i>
              </div>
              <h3>STAF PERANCANAN</h3>
              <p>SAMSUDIN</p>
            </div>
          </div>
          <div class="org-node level-3">
            <div class="org-card">
              <div class="org-icon">
                <i data-lucide="users"></i>
              </div>
              <h3>STAF TATAUSAHA</h3>
              <p>TALA</p>
            </div>
          </div>
          <div class="org-node level-3">
            <div class="org-card">
              <div class="org-icon">
                <i data-lucide="users"></i>
              </div>
              <h3>STAF PEMERINTAH</h3>
              <p>WARDI GOSERUPAS</p>
            </div>
          </div>
        </div>
        <div class="connection-line vertical"></div>

        <!-- Level 5: Others -->
        <div class="org-staff-grid cols-2">
          <div class="org-node level-3">
            <div class="org-card">
              <div class="org-icon">
                <i data-lucide="users"></i>
              </div>
              <h3>DESA</h3>
              <p>AJI</p>
            </div>
          </div>
          <div class="org-node level-3">
            <div class="org-card">
              <div class="org-icon">
                <i data-lucide="users"></i>
              </div>
              <h3>SEKERTARIS BPD</h3>
              <p>TOHID</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Section 3: Google Maps -->
  <section id="map" class="map-section">
    <div class="container">
      <div class="section-header">
        <h2>PETA WILAYAH DESA KARANGHARJA</h2>
        <div class="header-line white"></div>
      </div>

      <div class="map-container">
        <div class="map-card">
          <iframe
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d63457.97647!2d107.2182!3d-6.107994!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e6a2a135c633ae1%3A0xbf0e81e411d23543!2sKarangharja%2C%20Pebayuran%2C%20Bekasi%20Regency%2C%20West%20Java!5e0!3m2!1sen!2sid!4v1640000000000!5m2!1sen!2sid"
            width="100%"
            height="100%"
            style="border:0;"
            allowfullscreen=""
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
            title="Peta Wilayah Desa KarangHarja dengan Batas Desa"
            class="map-iframe"
          ></iframe>
        </div>
      </div>
    </div>
  </section>

  <!-- Section 4: Village Activities - IMPROVED VERSION -->
  <section id="activities" class="activities-section">
    <!-- Background decorative elements -->
    <div class="decorative-elements">
      <div class="decorative-circle green"></div>
      <div class="decorative-circle blue"></div>
      <div class="decorative-circle purple"></div>
    </div>

    <div class="container mx-auto px-4 relative z-10">
      <!-- Header -->
      <div class="section-header-activities">
        <div class="calendar-icon">
          <i data-lucide="calendar"></i>
        </div>
        <h2 class="section-title-activities">KEGIATAN DESA KARANGHARJA</h2>
        <div class="section-divider"></div>
        <p class="section-description">
          Ikuti perkembangan terbaru dan berbagai kegiatan yang dilaksanakan untuk kemajuan desa
        </p>
      </div>

      <!-- Activities Container - Will be populated by Firebase -->
      <div id="activities-container" class="activities-grid">
        <!-- Loading state -->
        <div class="loading-activities">
          <i data-lucide="loader-2" class="animate-spin"></i>
          <p>Memuat kegiatan...</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="container">
      <p>© 2025 Desa KarangHarja. Semua hak dilindungi.</p>
      <p class="footer-subtext">Kecamatan Pebayuran, Kabupaten Bekasi, Jawa Barat</p>
    </div>
  </footer>

  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="script.js"></script>
  <script>
    lucide.createIcons();

    // Navbar Toggle Functionality for Mobile
    const navbarToggle = document.getElementById('navbar-toggle');
    const navbarMenu = document.getElementById('navbar-menu');

    if (navbarToggle && navbarMenu) {
      navbarToggle.addEventListener('click', () => {
        navbarToggle.classList.toggle('active');
        navbarMenu.classList.toggle('active');
      });

      // Close menu when clicking outside
      document.addEventListener('click', (e) => {
        if (!navbarToggle.contains(e.target) && !navbarMenu.contains(e.target)) {
          navbarToggle.classList.remove('active');
          navbarMenu.classList.remove('active');
        }
      });
    }
  </script>
  
  
    <!-- Firebase and Activities Script -->
<script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>
<script src="https://unpkg.com/lucide@latest/dist/lucide.min.js"></script>

<script>
  // Initialize Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyC0AcdsPrAQxttVk1SBfBcZnF6tYg4y6GM",
    authDomain: "desakarangharja-31525.firebaseapp.com",
    databaseURL: "https://desakarangharja-31525-default-rtdb.asia-southeast1.firebasedatabase.app/",
    projectId: "desakarangharja-31525",
    storageBucket: "desakarangharja-31525.firebasestorage.app",
    messagingSenderId: "428460519406",
    appId: "1:428460519406:web:fca8b9854de78cac5628ff"
  };

  if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
  }
  const db = firebase.database();
  lucide.createIcons();

  // Function to render activities
  function renderActivities(activities) {
    const container = document.getElementById('activities-container');
    
    if (!activities || activities.length === 0) {
      container.innerHTML = 
        <div class="empty-activities">
          <div class="empty-icon">
            <i data-lucide="calendar"></i>
          </div>
          <h3 class="empty-title">Belum Ada Kegiatan yang Dipublikasi</h3>
          <p class="empty-subtitle">Kegiatan desa akan ditampilkan di sini setelah dipublikasi</p>
        </div>
      ;
      lucide.createIcons();
      return;
    }

    let html = '';
    activities.slice(0, 6).forEach(activity => {
      const date = activity.date ? new Date(activity.date).toLocaleDateString('id-ID', {
        day: 'numeric',
        month: 'long',
        year: 'numeric'
      }) : 'Tanggal tidak tersedia';
      
      // Create excerpt by removing HTML tags and limiting to 150 characters
      const textContent = activity.content.replace(/<[^>]*>/g, '');
      const excerpt = textContent.length > 150 ? textContent.substring(0, 150) + '...' : textContent;
      html += 
        <div class="activity-card">
          ${activity.imageBase64 ? 
            <div class="activity-image-container">
              <img src="${activity.imageBase64}" alt="${activity.title}" class="activity-image">
            </div>
           : ''}
          <div class="activity-content">
            <h3 class="activity-title">${activity.title || 'Tanpa Judul'}</h3>
            <div class="activity-meta">
              <span class="activity-date">
                <i data-lucide="calendar"></i> ${date}
              </span>
            </div>
            <div class="activity-excerpt">${excerpt}</div>
            <a href="#" class="activity-read-more">Baca selengkapnya</a>
          </div>
        </div>
      ;
    });

    container.innerHTML = html;
    lucide.createIcons();
  }

  // Listen for real-time updates from Firebase
  db.ref('activities').orderByChild('createdAt').on('value', (snapshot) => {
    const data = snapshot.val();
    const activities = data ? Object.entries(data)
      .map(([key, value]) => ({ id: key, ...value }))
      .filter(act => act.published)  // Tambah filter ini untuk only published
      .sort((a, b) => (b.createdAt  0) - (a.createdAt  0)) : [];
    
    renderActivities(activities);
  }, (error) => {
    console.error('Error loading activities:', error);
    document.getElementById('activities-container').innerHTML = 
      <div class="error-message">
        <i data-lucide="alert-circle"></i>
        <p>Gagal memuat kegiatan. Silakan coba lagi nanti.</p>
      </div>
    ;
    lucide.createIcons();
  });

  // Typewriter effect for hero section
  const typewriterText = document.getElementById('typewriter-text');
  if (typewriterText) {
    const text = "SISTEM INFORMASI DESA KARANGHARJA";
    let i = 0;
    
    function typeWriter() {
      if (i < text.length) {
        typewriterText.innerHTML += text.charAt(i);
        i++;
        setTimeout(typeWriter, 100);
      }
    }
    
    typeWriter();
  }
</script>
</body>
</html>
